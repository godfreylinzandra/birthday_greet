<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Website QR</title>
  <style>
    html, body {
      margin: 0;
      min-height: 100%;
      font-family: system-ui;
      background: linear-gradient(135deg, #4f1515, #d43434, #640202d8, #88080e);
    }

    * {
      box-sizing: border-box;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .card {
      background: white;
      color: #333;
      padding: 30px;
      border-radius: 16px;
      width: min(420px, 100%);
      text-align: center;
      border: 0.5px solid #000;
    }

    h1 {
      font-size: clamp(1.6rem, 5vw, 2.5rem);
      text-align: center;
      margin: 0 0 10px;
      background: radial-gradient(circle at 40% 30%, #a90000, #510000);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
    }

    p {
      margin: 0 0 14px;
      color: red;
    }

    #qrImage {
      width: min(260px, 74vw);
      height: auto;
      border-radius: 12px;
      border: 8px solid #fff;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      margin-bottom: 30px;
    }

    .actions {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    button, a {
      padding: 10px 20px;
      font-size: clamp(1rem, 2.2vw, 18px);
      border: 0.5px solid #fff;
      border-radius: 8px;
      background: radial-gradient(circle at 40% 30%, #a90000, #510000);
      color: white;
      cursor: pointer;
      text-decoration: none;
    }

    button:hover, a:hover {
      background: radial-gradient(circle at 40% 30%, #fcfcfc, #fea1a1);
      color: #000;
    }

    #siteUrl {
      margin-top: 12px;
      font-size: 0.92rem;
      word-break: break-all;
      color: #5a5a5a;
    }
  </style>
</head>
<body>
  <main class="card">
    <h1>Happy Birthday Kuya2!!!</h1>
    <p>Scan to celebrate.</p>
    <img id="qrImage" alt="QR code for main website" />
   
  </main>

  <script>
    // Fallback URL: update this if your deployed website URL changes.
    const fallbackWebsiteUrl = "https://godfreylinzandra.github.io/birthday_greet/";

    function isLocalHost(hostname) {
      return (
        hostname === "localhost" ||
        hostname === "127.0.0.1" ||
        hostname === "::1" ||
        hostname.endsWith(".local")
      );
    }

    function getMainWebsiteUrl() {
      if (window.location.protocol !== "http:" && window.location.protocol !== "https:") {
        return fallbackWebsiteUrl;
      }

      if (isLocalHost(window.location.hostname)) {
        return fallbackWebsiteUrl;
      }

      return `${window.location.origin}${window.location.pathname.replace(/qr\.html?$/i, "index.html")}`;
    }

    const mainWebsiteUrl = getMainWebsiteUrl();
    const qrService = "https://api.qrserver.com/v1/create-qr-code/?size=700x700&data=";
    const qrImageUrl = qrService + encodeURIComponent(mainWebsiteUrl);

    const qrImage = document.getElementById("qrImage");
    const openSiteLink = document.getElementById("openSiteLink");
    const copyBtn = document.getElementById("copyBtn");
    const siteUrlEl = document.getElementById("siteUrl");

    qrImage.src = qrImageUrl;
    openSiteLink.href = mainWebsiteUrl;
    siteUrlEl.textContent = mainWebsiteUrl;

    copyBtn.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(mainWebsiteUrl);
      } catch {
        const temp = document.createElement("textarea");
        temp.value = mainWebsiteUrl;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand("copy");
        temp.remove();
      }

      copyBtn.textContent = "Copied";
      setTimeout(() => {
        copyBtn.textContent = "Copy Link";
      }, 1200);
    });
  </script>
</body>
</html>
